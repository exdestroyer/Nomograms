<!DOCTYPE html>
<html>
<head>
<title>Quadratic Numogram</title>
</head>
<body>
<h2><center>x<sup>2</sup>+ax+b=0</center></h2>
<div id="home" onmousedown="mouseFunction(event)">
If you can see this, look for errors in the scripts with the script debugger (F12)
</div>
<p id="mus"></p>

<!-- the import instruction is not yet implemented
  Vectors.js should be imported into curves.js
  and that should be imported into the main script
  -->
<script lang="ecmascript" src='Vectors.js' ></script>
<script lang="ecmascript" src='curves.js'></script>

<script>
/* Note:  This is from Adams: Nomography Theory and Application 
 * problem 1-2 and figure 1-9
 * X1 = 0           Y1 = 10 * B
 * X2 = 15          Y2 = 10 * A
 * X3 = 15 *X/(x+1) Y3 = -10 * x^2/(x+1)
 */

var sText;
var pLegend;  // a phony vector (point) to specify legend position
var scaleX = 100/15;
var scaleY = 100/10/2; // the figure has its origin in the middle of the left side

// set up scaling from figure and// set up the curves
var uObj = setupUObj();
var vObj = setupVObj();
var wObj = setupWObj();

//set up svg and specify size
sText = '<svg width = "'+ dWidth + '" height = "' + dHeight +'" >/n'; 
//draw bounding box
sText += '<rect width="'+ dWidth + '" height="' + dHeight + '" style="fill:white;stroke-width:3;stroke:grey" />\n';

//draw curves
//debugger;
sText += drawCurve( uObj);
sText += drawCurve( vObj);
sText += drawCurve( wObj);
//finish svg string and display in <div> "home"
//place an extra legend
pLegend = new Vector(30,30);
pLegend = scaleToSVG(pLegend);
sText += '<text  font-size="20" font-family="Verdana" x="'+pLegend.x+
			'" y="'+pLegend.y+'" >x > 0 for a</text>\n';
pLegend = new Vector(30,25);
pLegend = scaleToSVG(pLegend);
sText += '<text  font-size="20" font-family="Verdana" x="'+pLegend.x+
			'" y="'+pLegend.y+'" >x < 0 for -a</text>\n';
var baseText = sText;		
//sText += ' </svg>\n';

// this displays the nomogram
//home.innerHTML = sText;

// separate isopleth
var p1 = new Vector(0,0);
var p2 = new Vector(100,100);


p1=scaleToSVG(p1);
p2=scaleToSVG(p2);
sText = baseText +'<line x1="'+p1.x+'" y1="'+p1.y+'" x2="'+p2.x+'" y2="'+p2.y+'" style="stroke:red" />\n';
sText += '</svg>\n';
home.innerHTML = sText;


// These curve objects have  label information, domain, and scale information and curve's parametric functions.
// These functions should take a parameter and return a value in the range 0 - 100 which will
// be scaled and mapped into the svg display.

function setupUObj(){
	var o = new Curve;
	var i, del;
	
	o.title = {x:5,y:95,t:"b"}; // curve title info

	// since it's a straight line, 2 points are sufficient
	o.domain = [-10,10];
	for(i=-10;i<11;i++){
		o.scale[i+10] = i; // labelled points
	}
	o.majorTicPoints=[]; // populated at run time
	del = 0.5;
	for(i=-10/del;i<10/del+1;i++){
		o.majorTics[i+10/del]= i*del;
	}
	del = 0.1;
	for(i=-10/del;i<10/del+1;i++){
		o.minorTics[i+10/del]= i*del;
	}
	o.x=function(p){return scaleX*(0);};
	o.y=function(p){return scaleY*(p) +50;};
	return o;
}

function setupVObj(){
	var o = new Curve;
	var i, del;
	o.title = {x:95,y:95,t:"a"}; // curve title info
	// since it's a straight line, 2 points are sufficient
	o.domain = [-10,10];
	for(i=-10;i<11;i++){
		o.scale[i+10] = i; // labelled points
	}
	o.majorTicPoints=[]; // populated at run time
	del = 0.5;
	for(i=-10/del;i<10/del+1;i++){
		o.majorTics[i+10/del]= i*del;
	}
	del = 0.1;
	for(i=-10/del;i<10/del+1;i++){
		o.minorTics[i+10/del]= i*del;
	}
	o.x=function(p){return scaleX*(15);};
	o.y=function(p){return scaleY*(p) +50;};
	return o;
}

function setupWObj(){
	var o = new Curve;
	var i;
   
	o.title = {x:45,y:50,t:"x"}; // curve title info
	//use for loops for these
	del=0.1;
	for(i=0;i<11/del;i++){
		o.domain[i]=i*del;
	}
	o.scale=[0,0.1,0.2,0.3,0.4,0.5,1,2,3,4,5,6,7,8,9,10]; // labelled points
	o.majorTicPoints=[]; // populated at run time
	o.majorTics=[0,0.05,0.1,0.15,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1,1.5,2,2.5,3,4,5,6,7,8,9,10];

	for(i=0;i<100;i++){
		o.minorTics[i]= i * 0.1;
	}
	o.x=function(p){return scaleX*(15*p/(p+1));}
	o.y=function(p){return 50- scaleY*(p*p/(p+1));}
	return o;
}

// put in an element with onmousedown="mouseFunction(event)" 
function mouseFunction(e) {  // this function displays mouse position
    var x = e.clientX;
    var y = e.clientY;
    var coor = "Coordinates: (" + x + "," + y + ")";
    document.getElementById("mus").innerHTML = coor;
}
</script>
</body>
</html>
